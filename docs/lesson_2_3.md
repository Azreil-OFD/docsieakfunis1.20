# Создание моделей с помощью Sequelize в Node.js

При работе с реляционными базами данных часто используется объектно-ориентированный подход для представления данных - моделирование. 

**Что такое модель в Sequelize?**

Модель - это класс, который представляет таблицу в базе данных. Модель описывает структуру таблицы и позволяет выполнять операции чтения/записи с помощью объектно-ориентированного кода.

**Зачем нужны модели?**

Использование моделей в Sequelize дает следующие преимущества:

- **Удобное представление данных** - модель позволяет работать с записями как с объектами, а не как с таблицами.

- **Валидация данных** - можно определить правила валидации при создании/обновлении записей.

- **Бизнес-логика** - дополнительная логика при работе с данными может быть описана в методах модели.

- **Автоматическое создание таблиц** - на основе моделей Sequelize может автоматически создавать соответствующие таблицы в БД.

- **Миграции** - при изменении модели можно автоматически применить эти изменения к структуре таблицы.

- **Ассоциации** - возможность описывать связи между моделями для реализации JOIN запросов.

**Как создать модель?**

Модель создается вызовом метода `define()` на экземпляре Sequelize:

```js
const User = sequelize.define('User', {
  // атрибуты
});
```

Таким образом модели позволяют выразительно и эффективно работать с данными в Sequelize.

## Типы данных Sequelize

Вот основные соответствия типов данных в Sequelize и их эквиваленты в PostgreSQL:

- **STRING** - varchar(255) в PostgreSQL

- **INTEGER** - integer в PostgreSQL 

- **BIGINT** - bigint в PostgreSQL

- **FLOAT** - double precision в PostgreSQL

- **DATE** - timestamp с часовым поясом в PostgreSQL

- **BOOLEAN** - boolean в PostgreSQL  

- **ENUM** - тип enum в PostgreSQL

- **BLOB** - bytea в PostgreSQL

- **JSON** - jsonb в PostgreSQL

- **UUID** - uuid в PostgreSQL

- **JSONB** - jsonb в PostgreSQL

Кроме того, в Sequelize есть специальные типы данных:

- **NOW** - дата и время при создании записи

- **UUIDV1** - уникальный идентификатор UUID версии 1

- **UUIDV4** - уникальный идентификатор UUID версии 4


# ***Практическая часть***

### Создание модели User с Sequelize


Чтобы начать работать с данными в PostgreSQL, необходимо описать модели соответствующие таблицам в базе данных. Давайте рассмотрим как создать модель Пользователя используя Sequelize.

Модели рекомендуется хранить в отдельной папке `models` в корне проекта. Для каждой сущности создается свой файл модели.

Сначала нужно импортировать объект DataTypes из Sequelize. Он содержит описание поддерживаемых типов данных.

```js
const { DataTypes } = require('sequelize');
```

Затем используем метод `define()` на экземпляре Sequelize, чтобы описать модель Пользователя:

```js 
// создаем экспорт в виде функции Инициатора для внедрения User в объект sequelize
module.exports = (sequelize) => {
 sequelize.define('User', {

  // Описываем поле firstName
  firstName: {
    // Указываем что это строка 
    type: DataTypes.STRING,
    // Значение не может быть NULL
    allowNull: false
  },

  // Описываем поле lastName
  lastName: {
    // Также строка
    type: DataTypes.STRING
  },

  // Описываем поле email
  email: {
    // Тип - строка
    type: DataTypes.STRING,
    // Значение должно быть уникальным 
    unique: true,
    // Добавляем валидатор для проверки формата email 
    validate: {
      isEmail: true  
    }
  }

}, {
  
  // Указываем имя таблицы в БД
  tableName: 'users' 
})
}
```

Внутри метода `define()` описываем поля модели:

- `firstName` - строка, обязательное поле
- `lastName` - строка
- `email` - строка, должна быть уникальной, валидация формата email

Для каждого поля указываем тип данных, а также дополнительные опции, такие как `allowNull`, `unique` и валидаторы.

Наконец, в опциях модели указываем физическое имя таблицы - `users`.

Теперь модель готова для взаимодействия с данными пользователей в БД на основе объектно-ориентированного кода.